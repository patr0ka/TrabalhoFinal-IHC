<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saturnia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --color-primary: #9333ea; 
            --color-secondary: #c20000; 
            
            --color-background: #000000; 
            --color-text-light: #f3f4f6;
            --nav-bg: #111827;
            --card-bg: #0d0d0d;
            --border-color: #1f2937;
            --input-bg: #1f2937;
            --timeline-bg: #111827;
            --track-header-bg: #1f2937;
        }

        body.light-mode {
            --color-background: #f0e0c7; 
            --color-text-light: #111827; 
            --nav-bg: #ffffff;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --input-bg: #f3f4f6;
            --timeline-bg: #e5e7eb;
            --track-header-bg: #f3f4f6;
        }

        body.light-mode .bg-gray-900,
        body.light-mode .bg-gray-800,
        body.light-mode .bg-black {
            background-color: #ffffff !important;
            color: #111827 !important;
            border-color: #e5e7eb !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        body.light-mode .text-white {
            color: #111827 !important;
        }
        
        body.light-mode .text-gray-300,
        body.light-mode .text-gray-400 {
            color: #4b5563 !important; 
        }

        body.light-mode input, body.light-mode select, body.light-mode textarea {
            background-color: #f3f4f6 !important;
            color: #000 !important;
            border: 1px solid #d1d5db !important;
        }

        body.light-mode .nav-bar {
            background-color: #ffffff !important;
            border-top: 1px solid #e5e7eb !important;
        }
        
        body.light-mode #ai-sidebar {
            background-color: #ffffff !important;
            border-left: 1px solid #e5e7eb !important;
        }

        .timeline-grid {
            background-image: linear-gradient(to right, #374151 1px, transparent 1px);
            background-size: 40px 100%;
        }
        body.light-mode .timeline-grid {
            background-image: linear-gradient(to right, #d1d5db 1px, transparent 1px);
        }
        
        .audio-clip {
            background: linear-gradient(90deg, var(--color-primary) 0%, #7e22ce 100%);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .waveform-pattern {
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='none'%3E%3Cpath d='M0 50 L10 20 L20 80 L30 30 L40 70 L50 40 L60 60 L70 20 L80 80 L90 10 L100 50' vector-effect='non-scaling-stroke' stroke='rgba(255,255,255,0.3)' fill='none' stroke-width='2'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-size: 50px 100%;
        }

        input[type=range].volume-slider {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range].volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #f3f4f6;
            cursor: pointer;
            margin-top: -4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }
        input[type=range].volume-slider::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #4b5563;
            border-radius: 2px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .nav-bar {
            background-color: var(--nav-bg);
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.5);
            z-index: 50;
            transition: background-color 0.3s ease;
        }
        .nav-icon {
            color: #6b7280;
            transition: color 0.2s ease-in-out, transform 0.1s;
        }
        .nav-icon.active {
            color: var(--color-primary);
            filter: drop-shadow(0 0 5px var(--color-primary));
        }
        .feed-post {
            border: 1px solid var(--border-color);
            background-color: var(--card-bg);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 0.3s ease-out forwards; }
    </style>
</head>

<body class="antialiased overflow-x-hidden"> 
    <main id="app-content" class="flex-grow pt-4 pb-20 md:pb-4 overflow-y-auto overflow-x-hidden">
        <div class="max-w-4xl mx-auto px-4">
            

            <!-- tela de login -->
            <section id="login-screen" class="view h-[90vh] flex flex-col items-center justify-center">
                <div class="w-full max-w-sm">
                    <div class="text-center mb-10">
                        <img src="img/saturnia.png" alt="Saturnia Logo" class="h-32 mx-auto mb-4 object-contain">
                    </div>

                    <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl border border-gray-700">
                        <div id="form-login" class="space-y-6">
                            <h2 class="text-2xl font-semibold text-white text-center">Login</h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-xs text-gray-400 ml-2 block mb-1">Email</label>
                                    <div class="relative">
                                        <i data-lucide="mail" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                                        <input type="email" placeholder="seu@email.com" class="w-full bg-gray-900 text-white rounded-xl py-3 pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-violet-500 transition duration-200 border border-gray-700">
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-400 ml-2 block mb-1">Senha</label>
                                    <div class="relative">
                                        <i data-lucide="lock" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                                        <input id="login-password" type="password" placeholder="••••••••" class="w-full bg-gray-900 text-white rounded-xl py-3 pl-12 pr-12 focus:outline-none focus:ring-2 focus:ring-violet-500 transition duration-200 border border-gray-700">
                                        <button type="button" onclick="togglePassword('login-password', this)" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors focus:outline-none">
                                            <i data-lucide="eye" class="w-5 h-5 hidden icon-show"></i>
                                            <i data-lucide="eye-off" class="w-5 h-5 icon-hide"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button id="btn-login" onclick="handleLogin()" class="w-full py-3 bg-violet-600 hover:bg-violet-700 text-white font-bold rounded-xl transition duration-200 shadow-lg shadow-violet-900/50 transform hover:scale-[1.02] flex items-center justify-center">
                                Entrar
                            </button>
                            <p class="text-center text-sm text-gray-400 mt-4">Não tem uma conta? <button onclick="toggleAuthMode()" class="text-violet-400 hover:text-violet-300 font-semibold underline">Criar agora</button></p>
                        </div>

                        <div id="form-register" class="space-y-6 hidden">
                            <h2 class="text-2xl font-semibold text-white text-center">Criar Conta</h2>
                            <div class="space-y-4">
                                <div><div class="relative"><i data-lucide="user" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i><input type="text" placeholder="Nome de Usuário" class="w-full bg-gray-900 text-white rounded-xl py-3 pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-200 border border-gray-700"></div></div>
                                <div><div class="relative"><i data-lucide="mail" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i><input type="email" placeholder="Email" class="w-full bg-gray-900 text-white rounded-xl py-3 pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-200 border border-gray-700"></div></div>
                                <div><div class="relative"><i data-lucide="lock" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i><input id="register-password" type="password" placeholder="Senha (Mín. 8 caracteres)" class="w-full bg-gray-900 text-white rounded-xl py-3 pl-12 pr-12 focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-200 border border-gray-700"><button type="button" onclick="togglePassword('register-password', this)" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors focus:outline-none"><i data-lucide="eye" class="w-5 h-5 hidden icon-show"></i><i data-lucide="eye-off" class="w-5 h-5 icon-hide"></i></button></div></div>
                            </div>
                            
                            <button id="btn-register" onclick="handleRegister()" class="w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition duration-200 shadow-lg shadow-red-900/50 transform hover:scale-[1.02] flex items-center justify-center">
                                Cadastrar
                            </button>
                            
                            <p id="register-error" class="text-red-500 text-xs text-center mt-2 hidden"></p>

                            <p class="text-center text-sm text-gray-400 mt-4">Já tem uma conta? <button onclick="toggleAuthMode()" class="text-red-400 hover:text-red-300 font-semibold underline">Entrar</button></p>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex justify-center space-x-6">
                        <button class="p-3 bg-gray-800 hover:bg-gray-700 rounded-full transition duration-200 group border border-gray-700 hover:border-green-500"><svg class="w-6 h-6 text-gray-400 group-hover:text-[#1DB954] transition-colors fill-current" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141 4.439-1.38 9.9-1.14 13.561 1.14.421.239.6.84.3 1.26zm.12-3.36C14.939 8.46 8.7 8.22 5.04 9.3c-.599.18-1.2-.24-1.38-.839-.18-.6.24-1.2.84-1.38 4.2-1.26 11.219-.96 15.06 1.32.6.36.84 1.14.479 1.74-.3.6-1.139.84-1.74.48z"/></svg></button>
                        <button class="p-3 bg-gray-800 hover:bg-gray-700 rounded-full transition duration-200 group border border-gray-700 hover:border-white"><svg class="w-6 h-6 text-gray-400 group-hover:text-white transition-colors fill-current" viewBox="0 0 24 24"><path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/></svg></button>
                        <button class="p-3 bg-gray-800 hover:bg-gray-700 rounded-full transition duration-200 group border border-gray-700 hover:border-pink-500"><svg class="w-6 h-6 text-gray-400 group-hover:text-[#E1306C] transition-colors fill-current" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></button>
                    </div>
                </div>
            </section>


            <!-- feed -->
            <section id="main-screen" class="view hidden">
                <div id="feed-container" class="space-y-6">
                    <div class="feed-post p-4 rounded-xl shadow-lg">
                        <div class="flex items-center mb-3">
                            <img src="img/WhatsApp Image 2025-11-21 at 15.40.28.jpeg" alt="Usuário 1" class="w-10 h-10 rounded-full border-2 border-violet-500 mr-3">
                            <div><p class="font-semibold text-white">Guigo</p><p class="text-xs text-gray-400">@guigonedochetko</p></div>
                        </div>
                        <p class="text-sm mb-3 text-gray-300">bus</p>
                        <img src="img/Captura de tela 2025-11-21 155758.jpg" alt="Arte da Música" class="w-full h-auto rounded-lg mb-4 object-cover">
                        <div class="flex justify-around items-center pt-2 border-t border-gray-800">
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-red-500" onclick="toggleLike(this)"><i data-lucide="heart" class="w-5 h-5 transition-colors duration-200"></i><span class="text-xs">8.2K</span></button>
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-violet-500" onclick="openComments(1)"><i data-lucide="message-circle" class="w-5 h-5"></i><span class="text-xs">167</span></button>
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-green-500" onclick="openShareModal()"><i data-lucide="share2" class="w-5 h-5"></i><span class="text-xs">29</span></button>
                        </div>
                    </div>
                    <div class="feed-post p-4 rounded-xl shadow-lg">
                        <div class="flex items-center mb-3">
                            <img src="img/WhatsApp Image 2025-11-23 at 17.02.55.jpeg" alt="Usuário 2" class="w-10 h-10 rounded-full border-2 border-red-500 mr-3">
                            <div><p class="font-semibold text-white">DonRuan</p><p class="text-xs text-gray-400">@ruanpablo</p><p class="text-xs text-gray-400">Compartilhou uma track de: Mc Zóio de Gato. </p></div>
                        </div>
                        <p class="text-sm mb-3 text-gray-300">bus</p>
                        <div class="bg-gray-800 h-12 flex items-center justify-between px-4 rounded-lg mb-4"><i data-lucide="play" class="w-6 h-6 text-red-500"></i><div class="flex-grow mx-4 h-1 bg-gray-700 rounded-full"><div class="w-3/5 h-full bg-red-500 rounded-full"></div></div><span class="text-xs text-gray-400">2:30 / 4:15</span></div>
                        <div class="flex justify-around items-center pt-2 border-t border-gray-800">
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-red-500" onclick="toggleLike(this)"><i data-lucide="heart" class="w-5 h-5 transition-colors duration-200"></i><span class="text-xs">5.6K</span></button>
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-violet-500" onclick="openComments(2)"><i data-lucide="message-circle" class="w-5 h-5"></i><span class="text-xs">120</span></button>
                            <button class="feed-action flex items-center space-x-2 text-gray-400 hover:text-green-500" onclick="openShareModal()"><i data-lucide="share2" class="w-5 h-5"></i><span class="text-xs">34</span></button>
                        </div>
                    </div>
                </div>
            </section>
            

            <!-- tela de busca-->
            <section id="search-screen" class="view hidden">
                <div class="mb-4 flex space-x-2">
                    <div class="relative flex-grow"><i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i><input type="text" placeholder="Pesquisar..." class="w-full bg-gray-800 text-white rounded-full py-3 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-violet-500 transition duration-200"></div>
                    <button onclick="toggleFilterPanel()" class="bg-gray-800 p-3 rounded-full text-violet-400 hover:text-violet-300 hover:bg-gray-700 transition border border-gray-700"><i data-lucide="sliders-horizontal" class="w-6 h-6"></i></button>
                </div>
                <div id="filter-panel" class="hidden bg-gray-900 border border-gray-800 p-4 rounded-xl mb-6 shadow-xl space-y-4">
                    <div class="flex justify-between items-center mb-2"><h3 class="text-white font-semibold">Filtros Avançados</h3><span class="text-xs text-violet-400 cursor-pointer hover:underline" onclick="clearFilters()">Limpar</span></div>
                    <div class="grid grid-cols-2 gap-3">
                        <div><label class="text-xs text-gray-400 block mb-1">País</label><select id="filter-country" onchange="filterResults()" class="w-full bg-gray-800 text-white text-sm rounded-lg p-2 focus:ring-1 focus:ring-violet-500 border-none"><option value="all">Todos</option><option value="Brasil">Brasil</option><option value="EUA">EUA</option><option value="Reino Unido">Reino Unido</option><option value="Japão">Japão</option></select></div>
                        <div><label class="text-xs text-gray-400 block mb-1">Gênero</label><select id="filter-genre" onchange="filterResults()" class="w-full bg-gray-800 text-white text-sm rounded-lg p-2 focus:ring-1 focus:ring-violet-500 border-none"><option value="all">Todos</option><option value="Rock">Rock</option><option value="Pop">Pop</option><option value="Hip-Hop">Hip-Hop</option><option value="Metal">Metal</option><option value="Funk">Funk</option></select></div>
                        <div><label class="text-xs text-gray-400 block mb-1">Estilo</label><select id="filter-style" onchange="filterResults()" class="w-full bg-gray-800 text-white text-sm rounded-lg p-2 focus:ring-1 focus:ring-violet-500 border-none"><option value="all">Todos</option><option value="Estúdio">Estúdio</option><option value="Ao Vivo">Ao Vivo</option><option value="Acústico">Acústico</option><option value="Remix">Remix</option></select></div>
                        <div><label class="text-xs text-gray-400 block mb-1">Duração</label><select id="filter-duration" onchange="filterResults()" class="w-full bg-gray-800 text-white text-sm rounded-lg p-2 focus:ring-1 focus:ring-violet-500 border-none"><option value="all">Qualquer</option><option value="short">Curta (< 3m)</option><option value="medium">Média (3m - 5m)</option><option value="long">Longa (> 5m)</option></select></div>
                    </div>
                    <div><label class="text-xs text-gray-400 block mb-1">Artista</label><div class="relative"><i data-lucide="mic-2" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"></i><input id="filter-artist" oninput="filterResults()" type="text" placeholder="Nome do artista..." class="w-full bg-gray-800 text-white text-sm rounded-lg py-2 pl-9 pr-2 focus:ring-1 focus:ring-violet-500 border-none"></div></div>
                </div>
                <h2 class="text-xl font-semibold mb-4 text-white">Resultados da <span class="text-violet-400">Busca</span></h2>
                <div id="search-results-container" class="space-y-4 pb-20"></div>
            </section>
            

            <!-- criar -->
            <section id="upload-screen" class="view hidden">
                <div class="space-y-6">
                    <div class="bg-gray-800 p-6 rounded-xl shadow-xl border border-violet-700/50 hover:border-violet-500 transition duration-200 text-center">
                        <i data-lucide="music-2" class="w-10 h-10 mx-auto mb-3 text-violet-400"></i>
                        <h2 class="text-xl font-semibold mb-2 text-white">Estúdio Sonus (Editor)</h2>
                        <p class="text-gray-400 mb-4 text-sm">Crie, edite e mixe suas tracks com ajuda da IA.</p>
                        <button onclick="showView('chat-screen')" class="w-full py-3 bg-violet-600 hover:bg-violet-700 text-white font-bold rounded-lg transition duration-200 shadow-md shadow-violet-500/30">Abrir Editor</button>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl shadow-xl border border-red-700/50 hover:border-red-500 transition duration-200 text-center">
                        <i data-lucide="upload-cloud" class="w-10 h-10 mx-auto mb-3 text-red-400"></i>
                        <h2 class="text-xl font-semibold mb-2 text-white">Upload de Arquivos</h2>
                        <p class="text-gray-400 mb-4 text-sm">Carregue suas próprias faixas de áudio.</p>
                        <label for="file-upload" class="block w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition duration-200 cursor-pointer shadow-md shadow-red-500/30">Selecionar Arquivo</label>
                        <input type="file" id="file-upload" class="hidden" accept="audio/*">
                    </div>
                </div>
            </section>
            

            <!-- editor -->
            <section id="chat-screen" class="view hidden h-[85vh] relative flex flex-col bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
                <div class="bg-gray-900 border-b border-gray-800 p-3 flex justify-between items-center shadow-md z-10">
                    <div class="flex items-center space-x-4">
                        <div class="text-violet-500 font-bold text-lg tracking-wider">SONUS<span class="text-white text-xs ml-1 font-normal">DAW</span></div>
                        <div class="flex space-x-2">
                            <button class="p-2 bg-gray-800 rounded hover:bg-gray-700 text-gray-300 hover:text-white" onclick="togglePlayState(this)"><i data-lucide="play" class="w-5 h-5 fill-current"></i></button>
                            <button class="p-2 bg-gray-800 rounded hover:bg-gray-700 text-gray-300 hover:text-white"><i data-lucide="square" class="w-5 h-5 fill-current"></i></button>
                            <button class="p-2 bg-red-900/50 rounded hover:bg-red-900 text-red-500 hover:text-red-400"><i data-lucide="circle" class="w-5 h-5 fill-current"></i></button>
                        </div>
                    </div>
                    <div class="bg-black/50 px-4 py-1 rounded text-red-500 font-mono text-xl border border-gray-800 shadow-inner">00:01:24</div>
                    <div class="flex items-center space-x-3 text-xs text-gray-400">
                        <div class="flex flex-col items-center"><span class="font-bold text-white">128</span> BPM</div>
                        <div class="flex flex-col items-center"><span class="font-bold text-white">4/4</span> SIG</div>
                        <button class="bg-violet-700 hover:bg-violet-600 text-white px-3 py-1.5 rounded flex items-center shadow-lg"><i data-lucide="download" class="w-3 h-3 mr-1"></i> Export</button>
                    </div>
                </div>
                <div class="flex flex-grow overflow-hidden">
                    <div class="w-1/3 md:w-1/4 bg-[#111827] border-r border-gray-800 flex flex-col overflow-y-auto">
                        <div class="p-2 border-b border-gray-800 sticky top-0 bg-[#111827] z-10">
                            <button class="w-full py-2 bg-gray-800 hover:bg-gray-700 text-violet-400 text-xs font-bold rounded border border-gray-700 flex items-center justify-center dashed">
                                <i data-lucide="plus" class="w-3 h-3 mr-1"></i> Nova Track (IA)
                            </button>
                        </div>
                        <div class="h-24 border-b border-gray-800 p-2 flex flex-col justify-between bg-[#1f2937]">
                            <div class="flex justify-between items-start"><span class="text-xs font-bold text-white truncate w-20">Drums 808</span><i data-lucide="drum" class="w-3 h-3 text-gray-500"></i></div>
                            <div class="flex space-x-1 mb-1"><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-green-600" onclick="toggleBtn(this, 'text-green-900', 'bg-green-500')">M</button><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-yellow-500" onclick="toggleBtn(this, 'text-yellow-900', 'bg-yellow-500')">S</button></div>
                            <input type="range" class="volume-slider" min="0" max="100" value="80">
                        </div>
                        <div class="h-24 border-b border-gray-800 p-2 flex flex-col justify-between bg-[#1f2937]">
                            <div class="flex justify-between items-start"><span class="text-xs font-bold text-white truncate w-20">Synth Lead</span><i data-lucide="keyboard" class="w-3 h-3 text-gray-500"></i></div>
                            <div class="flex space-x-1 mb-1"><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-green-600" onclick="toggleBtn(this, 'text-green-900', 'bg-green-500')">M</button><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-yellow-500" onclick="toggleBtn(this, 'text-yellow-900', 'bg-yellow-500')">S</button></div>
                            <input type="range" class="volume-slider" min="0" max="100" value="65">
                        </div>
                        <div class="h-24 border-b border-gray-800 p-2 flex flex-col justify-between bg-[#1f2937]">
                            <div class="flex justify-between items-start"><span class="text-xs font-bold text-white truncate w-20">Bassline</span><i data-lucide="activity" class="w-3 h-3 text-gray-500"></i></div>
                            <div class="flex space-x-1 mb-1"><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-green-600" onclick="toggleBtn(this, 'text-green-900', 'bg-green-500')">M</button><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-yellow-500" onclick="toggleBtn(this, 'text-yellow-900', 'bg-yellow-500')">S</button></div>
                            <input type="range" class="volume-slider" min="0" max="100" value="90">
                        </div>
                         <div class="h-24 border-b border-gray-800 p-2 flex flex-col justify-between bg-[#1f2937]">
                            <div class="flex justify-between items-start"><span class="text-xs font-bold text-white truncate w-20">Vocals (AI)</span><i data-lucide="mic" class="w-3 h-3 text-gray-500"></i></div>
                            <div class="flex space-x-1 mb-1"><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-green-600" onclick="toggleBtn(this, 'text-green-900', 'bg-green-500')">M</button><button class="w-6 h-6 rounded bg-gray-700 text-[10px] text-gray-400 hover:text-white hover:bg-yellow-500" onclick="toggleBtn(this, 'text-yellow-900', 'bg-yellow-500')">S</button></div>
                            <input type="range" class="volume-slider" min="0" max="100" value="70">
                        </div>
                    </div>
                    <div class="flex-grow bg-[#111827] overflow-auto timeline-grid relative">
                        <div class="absolute top-0 bottom-0 w-0.5 bg-red-500 z-20 shadow-[0_0_10px_rgba(239,68,68,0.5)]" style="left: 35%;"><div class="w-3 h-3 bg-red-500 -ml-1.5 transform rotate-45 -mt-1.5"></div></div>
                        <div class="h-24 border-b border-gray-800/50 relative flex items-center px-2">
                             <div class="audio-clip h-16 w-32 absolute left-2 border border-violet-400/30"><div class="waveform-pattern opacity-50"></div><span class="absolute top-1 left-1 text-[8px] text-white bg-black/50 px-1 rounded">Pattern 1</span></div>
                             <div class="audio-clip h-16 w-32 absolute left-36 border border-violet-400/30"><div class="waveform-pattern opacity-50"></div></div>
                             <div class="audio-clip h-16 w-32 absolute left-72 border border-violet-400/30"><div class="waveform-pattern opacity-50"></div></div>
                        </div>
                        <div class="h-24 border-b border-gray-800/50 relative flex items-center px-2">
                            <div class="audio-clip h-16 w-64 absolute left-36 bg-gradient-to-r from-blue-600 to-cyan-600 border border-cyan-400/30">
                                <div class="waveform-pattern opacity-60"></div><span class="absolute top-1 left-1 text-[8px] text-white bg-black/50 px-1 rounded">Melody A</span>
                            </div>
                        </div>
                         <div class="h-24 border-b border-gray-800/50 relative flex items-center px-2">
                             <div class="audio-clip h-16 w-96 absolute left-2 bg-gradient-to-r from-orange-600 to-red-600 border border-orange-400/30">
                                <div class="waveform-pattern opacity-70"></div><span class="absolute top-1 left-1 text-[8px] text-white bg-black/50 px-1 rounded">Bass Loop</span>
                            </div>
                        </div>
                        <div class="h-24 border-b border-gray-800/50 relative flex items-center px-2">
                            <div class="audio-clip h-16 w-48 absolute left-48 bg-gradient-to-r from-pink-600 to-rose-600 border border-pink-400/30">
                               <div class="waveform-pattern opacity-60"></div><span class="absolute top-1 left-1 text-[8px] text-white bg-black/50 px-1 rounded">AI Vox Gen 1</span>
                           </div>
                       </div>
                    </div>
                </div>
                <button onclick="toggleAIChat()" class="absolute bottom-6 right-6 bg-violet-600 hover:bg-violet-500 text-white p-3 rounded-full shadow-2xl shadow-violet-500/50 z-30 transition-transform hover:scale-110 border-2 border-white/20">
                    <i data-lucide="brain" class="w-6 h-6"></i>
                </button>
            </section>
            

            <!-- perfil -->
            <section id="profile-screen" class="view hidden">
                <div class="flex flex-col items-center mb-10 p-6 bg-gray-900 rounded-xl shadow-xl border border-violet-900">
                    <img src="img/Uchiha Legend.jpg" alt="Sua Foto" class="w-24 h-24 rounded-full border-4 border-red-500 mb-4 object-cover">
                    <p class="text-xl font-semibold text-white mb-1">Patroka</p>
                    <p class="text-sm text-gray-400">@patrokass</p>
                    <button class="mt-3 text-violet-400 hover:text-violet-300 text-sm font-medium transition duration-200"><i data-lucide="camera" class="w-4 h-4 inline mr-1"></i> Alterar Foto</button>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-4 bg-gray-800 rounded-lg hover:bg-gray-700/50 cursor-pointer transition duration-200 border border-transparent hover:border-violet-500"><div class="flex items-center space-x-3"><i data-lucide="lock" class="w-5 h-5 text-red-400"></i><span class="text-white">Privacidade da Conta</span></div><i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i></div>
                    <div class="flex justify-between items-center p-4 bg-gray-800 rounded-lg hover:bg-gray-700/50 cursor-pointer transition duration-200"><div class="flex items-center space-x-3"><i data-lucide="database" class="w-5 h-5 text-violet-400"></i><span class="text-white">Controle e Dados Pessoais</span></div><i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i></div>
                    <div class="flex justify-between items-center p-4 bg-gray-800 rounded-lg border border-transparent">
                        <div class="flex items-center space-x-3"><i data-lucide="sun-moon" class="w-5 h-5 text-yellow-400"></i><span class="text-white" id="theme-label">Modo Escuro (Ativo)</span></div>
                        <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"><input type="checkbox" name="toggle" id="toggle-dark" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-red-600 border-4 appearance-none cursor-pointer transition duration-200 ease-in checked:bg-violet-600 checked:right-0 right-auto"><label for="toggle-dark" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label></div>
                    </div>
                    <button onclick="showView('login-screen')" class="w-full mt-6 py-3 text-red-400 border border-red-700 rounded-lg hover:bg-red-900/50 transition duration-200 font-semibold">Sair da Conta</button>
                </div>
            </section>
        </div>
    </main>
    

    <!-- tela de comentários -->
    <div id="comment-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex flex-col justify-end transition-opacity duration-300">
        <div class="flex-grow cursor-pointer" onclick="closeComments()"></div>
        <div id="comment-modal-content" class="bg-gray-900 rounded-t-2xl h-[70vh] flex flex-col animate-slide-up border-t border-gray-700 shadow-2xl">
            <div class="p-4 border-b border-gray-800 flex justify-between items-center"><span class="font-bold text-lg text-white">Comentários</span><button onclick="closeComments()" class="text-gray-400 hover:text-white p-2"><i data-lucide="x" class="w-6 h-6"></i></button></div>
            <div id="comments-list" class="flex-grow overflow-y-auto p-4 space-y-4"></div>
            <div class="p-4 border-t border-gray-800 flex items-center bg-inherit pb-8">
                <img src="img/Uchiha Legend.jpg" class="w-8 h-8 rounded-full mr-3 border border-gray-600">
                <div class="flex-grow relative"><input id="comment-input" type="text" placeholder="Adicione um comentário..." class="w-full bg-gray-800 text-white rounded-full py-3 pl-4 pr-12 focus:outline-none focus:ring-1 focus:ring-violet-500 border border-gray-700"><button onclick="postComment()" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-violet-500 hover:text-violet-400 p-1"><i data-lucide="send-horizontal" class="w-5 h-5"></i></button></div>
            </div>
        </div>
    </div>


    <!-- tela de compartilhar -->
    <div id="share-modal" class="hidden fixed inset-0 bg-black/80 z-[80] flex flex-col justify-end transition-opacity duration-300">
        <div class="flex-grow cursor-pointer" onclick="closeShareModal()"></div>
        <div class="w-full bg-gray-900 rounded-t-2xl p-6 animate-slide-up border-t border-gray-700">
            <h3 class="text-white font-bold text-center mb-6">Compartilhar via</h3>
            <div class="grid grid-cols-4 gap-4 mb-6">
                <div class="flex flex-col items-center space-y-2 cursor-pointer group">
                    <div class="w-14 h-14 bg-[#25D366] rounded-full flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform">
                        <svg class="w-7 h-7 fill-current" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                    </div>
                    <span class="text-xs text-gray-300">WhatsApp</span>
                </div>
                <div class="flex flex-col items-center space-y-2 cursor-pointer group">
                    <div class="w-14 h-14 bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-600 rounded-full flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform">
                        <i data-lucide="instagram" class="w-7 h-7"></i>
                    </div>
                    <span class="text-xs text-gray-300">Instagram</span>
                </div>
                <div class="flex flex-col items-center space-y-2 cursor-pointer group">
                    <div class="w-14 h-14 bg-black border border-gray-600 rounded-full flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform">
                        <svg class="w-7 h-7 fill-current" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                    </div>
                    <span class="text-xs text-gray-300">X</span>
                </div>
                <div class="flex flex-col items-center space-y-2 cursor-pointer group">
                    <div class="w-14 h-14 bg-gray-700 rounded-full flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform">
                        <i data-lucide="link" class="w-7 h-7"></i>
                    </div>
                    <span class="text-xs text-gray-300">Copiar</span>
                </div>
            </div>
            <button onclick="closeShareModal()" class="w-full py-3 bg-gray-800 hover:bg-gray-700 text-white font-semibold rounded-xl transition duration-200">Cancelar</button>
        </div>
    </div>


    <!-- aba da sonus -->
    <aside id="ai-sidebar" class="fixed top-0 right-0 h-full w-80 bg-gray-900 border-l border-gray-800 z-[60] transform translate-x-full transition-transform duration-300 flex flex-col shadow-2xl">
        <div class="p-4 border-b border-gray-800 flex items-center justify-between bg-violet-900/20">
            <div class="flex items-center space-x-3"><div class="p-2 bg-violet-600 rounded-full"><i data-lucide="brain" class="w-5 h-5 text-white"></i></div><div><h3 class="font-bold text-white">Sonus</h3></div></div>
            <button onclick="toggleAIChat()" class="text-gray-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
        </div>
        <div class="flex-grow overflow-y-auto p-4 space-y-4 bg-gray-900/50">
            <div class="flex justify-start"><div class="bg-violet-700/80 text-white p-3 rounded-xl rounded-tl-none max-w-[90%] text-sm shadow-md">Olá Patroka! Precisa de ajuda na sua composição?</div></div>
        </div>
        <div class="p-4 border-t border-gray-800 flex items-center"><input type="text" placeholder="Ex: Sobreponha a track da bateria..." class="flex-grow bg-gray-800 text-white rounded-full py-3 px-4 focus:outline-none focus:ring-1 focus:ring-violet-500 border border-gray-700 text-sm"><button class="ml-2 p-2 bg-violet-600 hover:bg-violet-700 rounded-full"><i data-lucide="send" class="w-4 h-4 text-white"></i></button></div>
    </aside>


    <!-- barra de navegação -->
    <nav class="nav-bar fixed bottom-0 left-0 right-0 w-full border-t border-gray-800 hidden">
        <div class="max-w-4xl mx-auto flex justify-around items-center h-16">
            <button class="nav-button flex flex-col items-center" data-view="main-screen"><i data-lucide="home" class="nav-icon w-6 h-6 active"></i><span class="text-xs text-gray-400 mt-1">Início</span></button>
            <button class="nav-button flex flex-col items-center" data-view="search-screen"><i data-lucide="search" class="nav-icon w-6 h-6"></i><span class="text-xs text-gray-400 mt-1">Pesquisar</span></button>
            <button class="nav-button flex flex-col items-center" data-view="upload-screen"><div class="p-3 rounded-full bg-violet-600 hover:bg-violet-700 transition duration-200 shadow-lg shadow-violet-500/50"><i data-lucide="plus" class="w-6 h-6 text-white"></i></div></button>
            <button class="nav-button flex flex-col items-center" data-view="chat-screen"><i data-lucide="music-4" class="nav-icon w-6 h-6"></i><span class="text-xs text-gray-400 mt-1">Editor</span></button>
            <button class="nav-button flex flex-col items-center" data-view="profile-screen"><i data-lucide="user" class="nav-icon w-6 h-6"></i><span class="text-xs text-gray-400 mt-1">Perfil</span></button>
        </div>
    </nav>

    <script>
        const mockDatabase = [{ id: 1, title: "Iron Soul", artist: "Metal Heads", genre: "Metal", country: "EUA", style: "Estúdio", duration: 245, image: "https://placehold.co/100x100/9333ea/ffffff?text=Metal" },{ id: 2, title: "Samba da Vida", artist: "João Gilberto", genre: "Samba", country: "Brasil", style: "Acústico", duration: 180, image: "https://placehold.co/100x100/00ff00/000000?text=Samba" },{ id: 3, title: "Neon Tokyo", artist: "Synthwave Boy", genre: "Pop", country: "Japão", style: "Remix", duration: 320, image: "https://placehold.co/100x100/ff00ff/ffffff?text=Pop" },{ id: 4, title: "Favela Venceu", artist: "MC Zóio", genre: "Funk", country: "Brasil", style: "Ao Vivo", duration: 160, image: "https://placehold.co/100x100/ffff00/000000?text=Funk" },{ id: 5, title: "London Calling", artist: "The Clashers", genre: "Rock", country: "Reino Unido", style: "Estúdio", duration: 210, image: "https://placehold.co/100x100/ff0000/ffffff?text=Rock" },{ id: 6, title: "Deep Focus", artist: "Lofi Girl", genre: "Hip-Hop", country: "EUA", style: "Estúdio", duration: 400, image: "https://placehold.co/100x100/888888/ffffff?text=Lofi" }];
        
        let currentPostId = null;
        const commentsData = { 1: [{ user: "AnaB", text: "Essa batida é surreal!", time: "2h" }, { user: "MarcosV", text: "Alguém sabe o nome do sample?", time: "5h" }], 2: [{ user: "RuanPablo", text: "Zóio de Gato eterno!", time: "10m" }] };

        function openComments(postId) { currentPostId = postId; renderComments(); document.getElementById('comment-modal').classList.remove('hidden'); }
        function closeComments() { document.getElementById('comment-modal').classList.add('hidden'); currentPostId = null; }
        
        function openShareModal() { document.getElementById('share-modal').classList.remove('hidden'); }
        function closeShareModal() { document.getElementById('share-modal').classList.add('hidden'); }

        function renderComments() {
            const list = document.getElementById('comments-list'); list.innerHTML = "";
            const comments = commentsData[currentPostId] || [];
            if (comments.length === 0) { list.innerHTML = `<p class="text-gray-500 text-center text-sm mt-10">Seja o primeiro a comentar!</p>`; return; }
            comments.forEach(c => { const item = `<div class="flex items-start space-x-3"><div class="w-8 h-8 rounded-full bg-gradient-to-tr from-violet-500 to-red-500 flex items-center justify-center text-xs font-bold text-white">${c.user.charAt(0)}</div><div><div class="flex items-baseline space-x-2"><span class="font-semibold text-white text-sm">${c.user}</span><span class="text-xs text-gray-500">${c.time}</span></div><p class="text-gray-300 text-sm">${c.text}</p></div></div>`; list.innerHTML += item; });
        }
        function postComment() {
            const input = document.getElementById('comment-input'); const text = input.value.trim();
            if (!text || !currentPostId) return;
            if (!commentsData[currentPostId]) commentsData[currentPostId] = [];
            commentsData[currentPostId].push({ user: "Patroka", text: text, time: "Agora" });
            input.value = ""; renderComments();
            const list = document.getElementById('comments-list'); list.scrollTop = list.scrollHeight;
        }

        function toggleFilterPanel() { document.getElementById('filter-panel').classList.toggle('hidden'); }
        function clearFilters() { document.getElementById('filter-country').value = "all"; document.getElementById('filter-genre').value = "all"; document.getElementById('filter-style').value = "all"; document.getElementById('filter-duration').value = "all"; document.getElementById('filter-artist').value = ""; filterResults(); }
        function filterResults() {
            const country = document.getElementById('filter-country').value; const genre = document.getElementById('filter-genre').value; const style = document.getElementById('filter-style').value; const duration = document.getElementById('filter-duration').value; const artist = document.getElementById('filter-artist').value.toLowerCase();
            const filtered = mockDatabase.filter(track => { if (country !== "all" && track.country !== country) return false; if (genre !== "all" && track.genre !== genre) return false; if (style !== "all" && track.style !== style) return false; if (artist && !track.artist.toLowerCase().includes(artist)) return false; if (duration !== "all") { if (duration === "short" && track.duration >= 180) return false; if (duration === "medium" && (track.duration < 180 || track.duration > 300)) return false; if (duration === "long" && track.duration <= 300) return false; } return true; });
            renderResults(filtered);
        }
        function formatTime(seconds) { const min = Math.floor(seconds / 60); const sec = seconds % 60; return `${min}:${sec < 10 ? '0' : ''}${sec}`; }
        function renderResults(results) {
            const container = document.getElementById('search-results-container'); container.innerHTML = "";
            if (results.length === 0) { container.innerHTML = `<p class="text-center text-gray-500 mt-4">Nenhum resultado encontrado.</p>`; return; }
            results.forEach(track => { const card = `<div class="feed-post p-3 rounded-xl flex items-center space-x-4 shadow-md bg-gray-800 border border-gray-700"><img src="${track.image}" class="w-16 h-16 rounded-lg object-cover"><div class="flex-grow"><h3 class="font-bold text-white text-sm">${track.title}</h3><p class="text-xs text-gray-400">${track.artist} • ${track.genre}</p><div class="flex items-center space-x-2 mt-1"><span class="px-2 py-0.5 bg-violet-900/50 text-violet-300 text-[10px] rounded-full border border-violet-800">${track.country}</span><span class="px-2 py-0.5 bg-gray-700 text-gray-300 text-[10px] rounded-full">${track.style}</span></div></div><div class="text-xs text-gray-500">${formatTime(track.duration)}</div><button class="p-2 text-gray-400 hover:text-white"><i data-lucide="play-circle" class="w-6 h-6"></i></button></div>`; container.innerHTML += card; }); lucide.createIcons();
        }

        function toggleAIChat() {
            const sidebar = document.getElementById('ai-sidebar');
            if (sidebar.classList.contains('translate-x-full')) {
                sidebar.classList.remove('translate-x-full');
            } else {
                sidebar.classList.add('translate-x-full');
            }
        }

        function toggleBtn(btn, textClass, bgClass) {
            if (btn.classList.contains(bgClass)) { btn.classList.remove(bgClass, textClass); btn.classList.add('bg-gray-700', 'text-gray-400'); } else { btn.classList.remove('bg-gray-700', 'text-gray-400'); btn.classList.add(bgClass, textClass); }
        }
        function togglePlayState(btn) {
            const icon = btn.querySelector('svg');
            if (btn.dataset.playing === "true") { btn.dataset.playing = "false"; btn.classList.remove('text-green-500'); btn.classList.add('text-gray-300'); icon.innerHTML = '<polygon points="5 3 19 12 5 21 5 3"></polygon>'; } 
            else { btn.dataset.playing = "true"; btn.classList.remove('text-gray-300'); btn.classList.add('text-green-500'); icon.innerHTML = '<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>'; }
            lucide.createIcons();
        }

        const toggleSwitch = document.getElementById('toggle-dark'); const themeLabel = document.getElementById('theme-label'); const body = document.body;
        toggleSwitch.addEventListener('change', function() { if (this.checked) { body.classList.remove('light-mode'); themeLabel.textContent = "Modo Escuro (Ativo)"; themeLabel.classList.add('text-white'); themeLabel.classList.remove('text-gray-900'); } else { body.classList.add('light-mode'); themeLabel.textContent = "Modo Claro (Ativo)"; themeLabel.classList.remove('text-white'); themeLabel.classList.add('text-gray-900'); } });
        function togglePassword(inputId, btn) { const input = document.getElementById(inputId); const eyeShow = btn.querySelector('.lucide-eye'); const eyeHide = btn.querySelector('.lucide-eye-off'); if (input.type === 'password') { input.type = 'text'; eyeShow.classList.remove('hidden'); eyeHide.classList.add('hidden'); } else { input.type = 'password'; eyeShow.classList.add('hidden'); eyeHide.classList.remove('hidden'); } }
        function toggleAuthMode() { const loginForm = document.getElementById('form-login'); const registerForm = document.getElementById('form-register'); if (loginForm.classList.contains('hidden')) { loginForm.classList.remove('hidden'); registerForm.classList.add('hidden'); } else { loginForm.classList.add('hidden'); registerForm.classList.remove('hidden'); } }
        
        function handleLogin() {
            const btn = document.getElementById('btn-login');
            const originalContent = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<i data-lucide="loader-2" class="w-5 h-5 animate-spin mr-2 inline"></i> Verificando...`;
            lucide.createIcons();
            setTimeout(() => {
                btn.innerHTML = `<i data-lucide="check" class="w-5 h-5 mr-2 inline"></i> Sucesso!`;
                btn.classList.remove('bg-violet-600', 'hover:bg-violet-700');
                btn.classList.add('bg-green-600');
                lucide.createIcons();
                setTimeout(() => {
                    showView('main-screen');
                    setTimeout(() => {
                        btn.disabled = false;
                        btn.innerHTML = originalContent;
                        btn.classList.add('bg-violet-600', 'hover:bg-violet-700');
                        btn.classList.remove('bg-green-600');
                    }, 500);
                }, 800);
            }, 2000);
        }

        function handleRegister() {
            const passwordInput = document.getElementById('register-password');
            const btn = document.getElementById('btn-register');
            const originalContent = btn.innerHTML;
            const errorMsg = document.getElementById('register-error');

            if (passwordInput.value.length < 8) {
                errorMsg.textContent = "A senha deve ter pelo menos 8 caracteres.";
                errorMsg.classList.remove('hidden');
                return;
            }
            
            errorMsg.classList.add('hidden');
            btn.disabled = true;
            btn.innerHTML = `<i data-lucide="loader-2" class="w-5 h-5 animate-spin mr-2 inline"></i> Criando...`;
            lucide.createIcons();

            setTimeout(() => {
                btn.innerHTML = `<i data-lucide="check" class="w-5 h-5 mr-2 inline"></i> Sucesso!`;
                btn.classList.remove('bg-red-600', 'hover:bg-red-700');
                btn.classList.add('bg-green-600');
                lucide.createIcons();
                setTimeout(() => {
                    showView('main-screen');
                    setTimeout(() => {
                        btn.disabled = false;
                        btn.innerHTML = originalContent;
                        btn.classList.add('bg-red-600', 'hover:bg-red-700');
                        btn.classList.remove('bg-green-600');
                    }, 500);
                }, 800);
            }, 2000);
        }

        function showView(viewId) { document.querySelectorAll('.view').forEach(view => { view.classList.add('hidden'); }); const targetView = document.getElementById(viewId); if (targetView) { targetView.classList.remove('hidden'); document.getElementById('app-content').scrollTop = 0; } const navBar = document.querySelector('.nav-bar'); if (viewId === 'login-screen') { navBar.classList.add('hidden'); } else { navBar.classList.remove('hidden'); } document.querySelectorAll('.nav-button').forEach(button => { const icon = button.querySelector('.nav-icon'); if (icon) { if (button.dataset.view === viewId) { icon.classList.add('active'); } else { icon.classList.remove('active'); } } }); if (viewId === 'search-screen') filterResults(); lucide.createIcons(); }
        document.querySelectorAll('.nav-button').forEach(button => { button.addEventListener('click', () => { showView(button.dataset.view); }); });
        function toggleLike(button) { const icon = button.querySelector('svg'); const span = button.querySelector('span'); if (button.classList.contains('text-red-500')) { button.classList.remove('text-red-500'); button.classList.add('text-gray-400'); icon.setAttribute('fill', 'none'); } else { button.classList.remove('text-gray-400'); button.classList.add('text-red-500'); icon.setAttribute('fill', 'currentColor'); } }
        window.onload = function() { showView('login-screen'); lucide.createIcons(); };
    </script>
</body>
</html>